# ImageFlow 产品需求文档

## 1. 产品概述

ImageFlow 是一个专业的在线图片处理工具，专注于图片压缩与格式转换。通过极致简约的设计、强大的客户端处理能力和对下一代图片格式的全面支持，为用户提供无缝、高效、安全的图片处理体验。产品通过Google AdSense广告实现商业化，为用户提供免费的专业图片处理服务。

## 2. 核心功能

### 2.1 用户角色
由于ImageFlow是一个工具型产品，无需用户注册登录，所有用户均为匿名访客，享有相同的功能权限。

### 2.2 功能模块
我们的ImageFlow应用包含以下核心页面：
1. **主页面**：拖拽上传区域、图片列表管理、压缩配置面板、实时预览窗口
2. **处理页面**：批量处理进度、状态监控、错误处理提示
3. **下载页面**：处理结果展示、ZIP打包下载、操作历史

### 2.3 页面详情

| 页面名称 | 模块名称 | 功能描述 |
|----------|----------|----------|
| 主页面 | 拖拽上传区域 | 支持文件和文件夹拖拽上传，文件选择按钮，文件类型验证和预检 |
| 主页面 | 图片列表管理 | 显示上传图片的缩略图、文件名、大小，提供移除功能 |
| 主页面 | 压缩配置面板 | 质量滑块控制(0-100)，输出格式选择(JPG/PNG/WebP/AVIF)，批量设置应用 |
| 主页面 | 实时预览窗口 | 压缩前后对比预览，可拖动分割线，实时显示文件大小和压缩率 |
| 主页面 | 主题切换 | 亮色/暗色/护眼三种主题模式，平滑过渡效果，localStorage持久化 |
| 处理页面 | 批量处理引擎 | Web Workers后台处理，进度条显示，状态指示器(处理中/成功/失败) |
| 处理页面 | 错误处理机制 | 智能错误提示，自动重试机制，格式降级处理 |
| 下载页面 | 结果展示 | 处理完成的图片预览，文件大小对比，压缩率统计 |
| 下载页面 | ZIP下载 | 一键打包下载所有处理完成的图片，支持批量命名 |
| 全局 | Google AdSense | 在非核心区域合理布局广告，不影响用户体验 |

## 3. 核心流程

用户使用ImageFlow的主要操作流程如下：
1. 用户访问主页面，通过拖拽或点击上传图片文件
2. 系统验证文件类型并显示在图片列表中
3. 用户在配置面板调整压缩质量和输出格式
4. 实时预览窗口显示压缩效果对比
5. 用户点击开始处理，系统使用Web Workers进行批量处理
6. 处理完成后，用户可以单独下载或打包下载所有图片
7. 对于AVIF格式，优先使用服务端处理，失败时自动降级到客户端处理

```mermaid
graph TD
    A[主页面] --> B[拖拽上传]
    B --> C[图片列表]
    C --> D[配置面板]
    D --> E[实时预览]
    E --> F[批量处理]
    F --> G[下载页面]
    G --> H[ZIP下载]
    
    F --> I[错误处理]
    I --> J[重试机制]
    J --> F
```

## 4. 用户界面设计

### 4.1 设计风格
- **主色调**：现代蓝色 (#3B82F6) 和中性灰色 (#6B7280)
- **辅助色**：成功绿色 (#10B981)，警告橙色 (#F59E0B)，错误红色 (#EF4444)
- **按钮样式**：圆角矩形，微妙阴影，悬停状态变化
- **字体**：系统默认字体栈，标题16-24px，正文14-16px
- **布局风格**：卡片式设计，充足留白，清晰的视觉层次
- **图标风格**：线性图标，简洁现代，与整体设计保持一致

### 4.2 页面设计概览

| 页面名称 | 模块名称 | UI元素 |
|----------|----------|--------|
| 主页面 | 拖拽上传区域 | 虚线边框，居中图标和文字，悬停状态高亮，支持拖拽视觉反馈 |
| 主页面 | 图片列表 | 网格布局，卡片式设计，缩略图圆角，文件信息清晰展示 |
| 主页面 | 配置面板 | 侧边栏布局，滑块组件，下拉选择器，实时数值显示 |
| 主页面 | 预览窗口 | 分屏对比，可拖拽分割线，图片缩放控制，文件信息对比 |
| 处理页面 | 进度显示 | 进度条动画，状态图标，处理时间估算，错误状态提示 |
| 下载页面 | 结果展示 | 成功状态图标，文件大小对比图表，压缩率百分比显示 |

### 4.3 响应式设计
产品采用移动优先的响应式设计，完美适配桌面、平板和移动端。在移动端，拖拽上传区域调整为点击上传，配置面板采用底部抽屉式设计，确保核心功能在小屏幕上的可用性。